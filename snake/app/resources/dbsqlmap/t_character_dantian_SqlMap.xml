<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd">
<sqlMap namespace="t_character_dantian">
	<typeAlias alias="CharacterDanTian" type="net.snake.gamemodel.heroext.dantian.bean.CharacterDanTian"/>
	<resultMap class="CharacterDanTian"	id="CharacterDanTianRes">
		<result column="f_characterid" jdbcType="INTEGER" property="characterid" />
		<result column="f_dantianid" jdbcType="INTEGER" property="dantianid" />
		<result column="f_skillitem" jdbcType="VARCHAR" property="skillitem" />
		<result column="f_luck" jdbcType="INTEGER" property="luck" />
		<result column="f_faildcount" jdbcType="INTEGER" property="faildcount" />
		<result column="f_luck_lastclear" jdbcType="TIMESTAMP"
			property="luckLastclear" />
		<result column="f_before_luck" jdbcType="INTEGER" property="beforeLuck" />
	</resultMap>
	
	<select id="selectById" parameterClass="java.lang.Integer"	resultMap="CharacterDanTianRes">
		select * from t_character_dantian		where f_characterid = #characterid#
	</select>
	
	<update id="clearZhuFu">
		update t_character_dantian set 	f_before_luck=f_luck,f_luck_lastclear=now(),f_luck=0
	</update>

	<insert id="insert" parameterClass="CharacterDanTian">
		insert into t_character_dantian (f_characterid, f_dantianid, f_luck, f_faildcount)
		values (#characterid:INTEGER#, #dantianid:INTEGER#,#luck:INTEGER#,	#faildcount:INTEGER#)
	</insert>
	
	<update id="updateById" parameterClass="CharacterDanTian">
		update t_character_dantian
		set f_dantianid = #dantianid:INTEGER#,
		f_skillitem = #skillitem:VARCHAR#,
		f_luck = #luck:INTEGER#,
		f_faildcount = #faildcount:INTEGER#,
		f_luck_lastclear = #luckLastclear:TIMESTAMP#,
		f_before_luck = #beforeLuck:INTEGER#
		where f_characterid = #characterid:INTEGER#
	</update>

</sqlMap>