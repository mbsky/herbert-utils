<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd">
<sqlMap namespace="t_chest">
	<typeAlias alias="Chest" type="net.snake.gamemodel.chest.bean.Chest" />
	<resultMap class="Chest" id="ChestRes">
		<result column="f_id" jdbcType="INTEGER" property="id" />
		<result column="f_character_id" jdbcType="INTEGER" property="characterId" />
		<result column="f_time" jdbcType="VARCHAR" property="time" />
		<result column="f_chest_resources_id" jdbcType="VARCHAR" property="chestResourcesId" />
		<result column="f_goodmodel_type" jdbcType="INTEGER" property="goodmodelType" />
		<result column="f_type" jdbcType="TINYINT" property="type" />
		<result column="f_chest_list" jdbcType="VARCHAR" property="chestList" />
		<result column="f_position" jdbcType="VARCHAR" property="position" />
		<result column="f_turn" jdbcType="TINYINT" property="turn" />
		<result column="f_lijin_type" jdbcType="TINYINT" property="lijinType" />
		<result column="f_charactergood_uuid" jdbcType="VARCHAR" property="charactergoodUuid" />
		<result column="f_pinzhi" jdbcType="VARCHAR" property="pinzhi" />
		<result column="f_binding" jdbcType="TINYINT" property="binding" />
		<result column="f_quantity" jdbcType="TINYINT" property="quantity" />
		<result column="f_fail_time" jdbcType="INTEGER" property="failTime" />
		<result column="f_full_service_announcement" jdbcType="TINYINT" property="fullServiceAnnouncement" />
	</resultMap>

	<select id="selectByTpe" parameterClass="Chest" resultMap="ChestRes">
		select * from t_chest where f_character_id=#characterId# and f_type=#type#
	</select>

	<select id="selectChest" resultMap="ChestRes">
		select * from t_chest WHERE f_time &lt;= DATE_SUB(CURDATE(), INTERVAL 14 DAY) and f_type = 1 order by f_time desc
	</select>

	<update id="deleteChest">
		delete from t_chest WHERE f_time &lt;= DATE_SUB(CURDATE(), INTERVAL 14 DAY) and f_type = 1
	</update>

	<insert id="insertSelective" parameterClass="Chest">
		insert into t_chest
		<dynamic prepend="(">
			<isNotNull prepend="," property="id">
				f_id
			</isNotNull>
			<isNotNull prepend="," property="characterId">
				f_character_id
			</isNotNull>
			<isNotNull prepend="," property="time">
				f_time
			</isNotNull>
			<isNotNull prepend="," property="chestResourcesId">
				f_chest_resources_id
			</isNotNull>
			<isNotNull prepend="," property="goodmodelType">
				f_goodmodel_type
			</isNotNull>
			<isNotNull prepend="," property="type">
				f_type
			</isNotNull>
			<isNotNull prepend="," property="chestList">
				f_chest_list
			</isNotNull>
			<isNotNull prepend="," property="position">
				f_position
			</isNotNull>
			<isNotNull prepend="," property="turn">
				f_turn
			</isNotNull>
			<isNotNull prepend="," property="lijinType">
				f_lijin_type
			</isNotNull>
			<isNotNull prepend="," property="charactergoodUuid">
				f_charactergood_uuid
			</isNotNull>
			<isNotNull prepend="," property="pinzhi">
				f_pinzhi
			</isNotNull>
			<isNotNull prepend="," property="binding">
				f_binding
			</isNotNull>
			<isNotNull prepend="," property="quantity">
				f_quantity
			</isNotNull>
			<isNotNull prepend="," property="failTime">
				f_fail_time
			</isNotNull>
			<isNotNull prepend="," property="fullServiceAnnouncement">
				f_full_service_announcement
			</isNotNull>
			)
		</dynamic>
		values
		<dynamic prepend="(">
			<isNotNull prepend="," property="id">
				#id:INTEGER#
			</isNotNull>
			<isNotNull prepend="," property="characterId">
				#characterId:INTEGER#
			</isNotNull>
			<isNotNull prepend="," property="time">
				#time:VARCHAR#
			</isNotNull>
			<isNotNull prepend="," property="chestResourcesId">
				#chestResourcesId:VARCHAR#
			</isNotNull>
			<isNotNull prepend="," property="goodmodelType">
				#goodmodelType:INTEGER#
			</isNotNull>
			<isNotNull prepend="," property="type">
				#type:TINYINT#
			</isNotNull>
			<isNotNull prepend="," property="chestList">
				#chestList:VARCHAR#
			</isNotNull>
			<isNotNull prepend="," property="position">
				#position:VARCHAR#
			</isNotNull>
			<isNotNull prepend="," property="turn">
				#turn:TINYINT#
			</isNotNull>
			<isNotNull prepend="," property="lijinType">
				#lijinType:TINYINT#
			</isNotNull>
			<isNotNull prepend="," property="charactergoodUuid">
				#charactergoodUuid:VARCHAR#
			</isNotNull>
			<isNotNull prepend="," property="pinzhi">
				#pinzhi:VARCHAR#
			</isNotNull>
			<isNotNull prepend="," property="binding">
				#binding:TINYINT#
			</isNotNull>
			<isNotNull prepend="," property="quantity">
				#quantity:TINYINT#
			</isNotNull>
			<isNotNull prepend="," property="failTime">
				#failTime:INTEGER#
			</isNotNull>
			<isNotNull prepend="," property="fullServiceAnnouncement">
				#fullServiceAnnouncement:TINYINT#
			</isNotNull>
			)
		</dynamic>
	</insert>

	<update id="updateByPrimaryKeySelective" parameterClass="Chest">
		update t_chest
		<dynamic prepend="set">
			<isNotNull prepend="," property="characterId">
				f_character_id = #characterId:INTEGER#
			</isNotNull>
			<isNotNull prepend="," property="time">
				f_time = #time:VARCHAR#
			</isNotNull>
			<isNotNull prepend="," property="chestResourcesId">
				f_chest_resources_id = #chestResourcesId:VARCHAR#
			</isNotNull>
			<isNotNull prepend="," property="goodmodelType">
				f_goodmodel_type = #goodmodelType:INTEGER#
			</isNotNull>
			<isNotNull prepend="," property="type">
				f_type = #type:TINYINT#
			</isNotNull>
			<isNotNull prepend="," property="chestList">
				f_chest_list = #chestList:VARCHAR#
			</isNotNull>
			<isNotNull prepend="," property="position">
				f_position = #position:VARCHAR#
			</isNotNull>
			<isNotNull prepend="," property="turn">
				f_turn = #turn:TINYINT#
			</isNotNull>
			<isNotNull prepend="," property="lijinType">
				f_lijin_type = #lijinType:TINYINT#
			</isNotNull>
			<isNotNull prepend="," property="charactergoodUuid">
				f_charactergood_uuid = #charactergoodUuid:VARCHAR#
			</isNotNull>
			<isNotNull prepend="," property="pinzhi">
				f_pinzhi = #pinzhi:VARCHAR#
			</isNotNull>
			<isNotNull prepend="," property="binding">
				f_binding = #binding:TINYINT#
			</isNotNull>
			<isNotNull prepend="," property="quantity">
				f_quantity = #quantity:TINYINT#
			</isNotNull>
			<isNotNull prepend="," property="failTime">
				f_fail_time = #failTime:INTEGER#
			</isNotNull>
			<isNotNull prepend="," property="fullServiceAnnouncement">
				f_full_service_announcement = #fullServiceAnnouncement:TINYINT#
			</isNotNull>
		</dynamic>
		where f_id = #id:INTEGER#
	</update>

</sqlMap>