<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd">
<sqlMap namespace="t_activities">
	<typeAlias alias="Activities" type="net.snake.gamemodel.activities.bean.Activities"/>
	<resultMap class="Activities" id="ActivitiesRes">
		<result column="f_id" jdbcType="INTEGER" property="id" />
		<result column="f_account_id" jdbcType="INTEGER" property="accountId" />
		<result column="f_type" jdbcType="INTEGER" property="type" />
		<result column="f_count" jdbcType="INTEGER" property="count" />
		<result column="f_count_limit" jdbcType="INTEGER" property="countLimit" />
		<result column="f_chongzhiqian" jdbcType="REAL" property="chongzhiqian" />
		<result column="f_ext" jdbcType="VARCHAR" property="ext" />
	</resultMap>
	
	<select id="selectByaId" parameterClass="Activities"	resultMap="ActivitiesRes">
		select *	from t_activities where f_account_id=#accountId# 
	</select>
	
	<select id="selectByaIdcId" parameterClass="Activities"	resultMap="ActivitiesRes">
		select *	from t_activities where f_account_id=#accountId# and f_count_limit=#countLimit#
	</select>
	
	<select id="selectByAccountAndType" parameterClass="Activities"	resultMap="ActivitiesRes">
		select *	from t_activities where f_account_id=#accountId# and f_type=#type#
	</select>
	
	<select id="selectByaIdcIdType" parameterClass="Activities"	resultMap="ActivitiesRes">
		select *	from t_activities where f_account_id=#accountId# and f_count_limit=#countLimit# and f_type=#type# 
	</select>
	
	<insert id="insert" parameterClass="Activities">
		insert into t_activities (f_account_id, f_type, f_count,
		f_count_limit, f_chongzhiqian, f_ext)
		values (#accountId:INTEGER#, #type:INTEGER#, #count:INTEGER#,
		#countLimit:INTEGER#,
		#chongzhiqian:REAL#, #ext:VARCHAR#)
		<selectKey keyProperty="id" resultClass="java.lang.Integer">
			SELECT LAST_INSERT_ID()
		</selectKey>
	</insert>
	<update id="updateCount" parameterClass="Activities">
		update t_activities set f_count = #count#	where f_id = #id#
	</update>
</sqlMap>