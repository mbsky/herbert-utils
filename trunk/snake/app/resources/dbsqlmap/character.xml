<?xml version="1.0" encoding="UTF-8" ?>

<!DOCTYPE sqlMap      
    PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN"      
    "http://ibatis.apache.org/dtd/sql-map-2.dtd">

<sqlMap>

	<!-- Use type aliases to avoid typing the full classname every time. -->
	<typeAlias alias="Hero" type="net.snake.gamemodel.hero.bean.Hero" />
	<resultMap id="HeroRes" class="Hero">
		<result property="id" column="f_id" />
		<result property="originalSid" column="f_original_sid" />
		<result property="accountId" column="f_account_id" />
		<result property="accountInitiallyId" column="f_account_initially_id" />
		<result property="characterInitiallyId" column="f_character_initially_id" />
		<result property="popsinger" column="f_popsinger" />
		<result property="sex" column="f_sex" />
		<result property="headimg" column="f_headimg" />
		<result property="name" column="f_name" />
		<!-- <result property="desc" column="f_desc" /> -->
		<result property="grade" column="f_grade" />
		<result property="nowHp" column="f_now_hp" />
		<result property="maxHp" column="f_max_hp" />
		<result property="nowMp" column="f_now_mp" />
		<result property="maxMp" column="f_max_mp" />
		<result property="nowSp" column="f_now_sp" />
		<result property="maxSp" column="f_max_sp" />
		<result property="nowExperience" column="f_now_experience" />
		<result property="nextExperience" column="f_next_experience" />
		<result property="attack" column="f_attack" />
		<result property="defence" column="f_defence" />
		<result property="hit" column="f_hit" />
		<result property="crt" column="f_crt" />
		<result property="dodge" column="f_dodge" />
		<result property="atkColdtime" column="f_atk_coldtime" />
		<result property="moveSpeed" column="f_move_speed" />
		<result property="zhenqi" column="f_zhenqi" />
		<result property="attackAddpoint" column="f_attack_addpoint" />
		<result property="defenceAddpoint" column="f_defence_addpoint" />
		<result property="lightAddpoint" column="f_light_addpoint" />
		<result property="strongAddpoint" column="f_strong_addpoint" />
		<!-- <result property="useablepoint" column="f_useablepoint" /> -->
		<result property="potential" column="f_potential" />
		<result property="copper" column="f_copper" />
		<result property="jiaozi" column="f_jiaozi" />
		<result property="prestige" column="f_prestige" />
		<result property="nowAppellationid" column="f_now_appellationid" />
		<!-- <result property="consortId" column="f_consort_id" /> -->
		<result property="scene" column="f_scene" />
		<result property="x" column="f_x" />
		<result property="y" column="f_y" />
		<result property="isallowChat" column="f_isallow_chat" />
		<result property="allowchatStarttime" column="f_allowchat_starttime" />
		<result property="createtime" column="f_createtime" />
		<result property="createip" column="f_createip" />
		<result property="lastdate" column="f_lastdate" />
		<result property="lastip" column="f_lastip" />
		<result property="onlinedate" column="f_onlinedate" />
		<result property="skillid" column="f_skillid" />
		<!--<result property="instanceId" column="f_instance_id" /> <result property="lineId" column="f_line_id" /> -->
		<result property="lastLogindate" column="f_last_logindate" />
		<result property="iscloseCharacter" column="f_isclose_character" />
		<result property="isonline" column="f_isonline" />
		<result property="maxHorseAmount" column="f_max_horse_amount" />
		<result property="maxBagAmount" column="f_max_bag_amount" />
		<result property="maxStorageAmount" column="f_max_storage_amount" />
		<result property="channelXuewei" column="f_channel_xuewei" nullValue="0" />
		<result property="channelJingmai" column="f_channel_jingmai" />
		<result property="channelRealdragon" column="f_channel_realdragon" />
		<result property="contemptcount" column="f_contempt_count" />
		<result property="worshipcount" column="f_worship_count" />
		<result property="storageCopper" column="f_storage_copper" />
		<result property="maxStorageHorseAmount" column="f_max_storage_horse_amount" />
		<result property="maxContinueKillcount" column="f_max_continue_killcount" />
		<result property="bossKill" column="f_boss_kill" nullValue="0" />
		<result property="stallName" column="f_stall_Name" />
		<result property="nowXingqing" column="f_now_xingqing" />
		<result property="nowBiaoqing" column="f_now_biaoqing" />
		<result property="flowerCount" column="f_flower_count" />
		<result property="state" column="f_state" />
		<result property="biguanDate" column="f_biguan_date" />
		<result property="pkModel" column="f_pk_model" />
		<result property="stallStatus" column="f_stall_status" />
		<result property="lastRidehorse" column="f_last_ridehorse" />
		<result property="weekLoginCount" column="f_week_login_count" />
		<result property="dropGood" column="f_drop_good" />
		<result property="maxJumpCount" column="f_max_jump_count" />
		<result property="dayOnline" column="f_day_online" />
		<result property="dazuoSkill" column="f_dazuo_skill" />
		<result property="chongqiRecord" column="f_chongqi_record" />
		<result property="chengjiuPoint" column="f_chengjiu_point" />
		<result property="channelBeidongExp" column="f_channel_beidong_exp" />
		<result property="contribution" column="f_contribution" />
		<result property="skillpoBeginTime" column="f_skill_po_begin_time" />
		<result property="skillpoTime" column="f_skill_po_time" />
		<result property="skipNoviceNavigation" column="f_skip_novice_navigation" />
		<result property="devilcnt" column="f_devilcnt" />
		<result property="leijiGainLijin" column="f_leiji_gain_lijin" />
		<result property="limitOnlineTime" column="f_limit_online_time" />
		<result property="chengzhanShengWang" column="f_chengzhan_shengwang" />
		<result property="lunjianShengWang" column="f_lunjian_shengwang" />
		<result property="dantiangrade" column="t_dantian_grade" nullValue="0" />
		<result property="todayChengzhanShengwang" column="f_today_chengzhan_shengwang" />
		<result property="todayLiaoshangExp" column="f_today_liaoshang_exp" />
		<result property="todayLiaoshangTime" column="f_today_liaoshang_time" />
		<result column="f_fuhua_cdtime" property="fuhuaCdtime" />
		<result column="f_fuhua_starttime" property="fuhuaStarttime" />
		<result column="f_fuhua_neidan_id" property="fuhuaNeidanId" />
		<result column="f_isfuhua" property="isfuhua" />
		<result column="f_fuhua_count" property="fuhuaCount" />
		<result column="f_kill_num" property="killNum" />
	</resultMap>
	<insert id="characterInsert" parameterClass="Hero">
		insert into t_character(
		f_original_sid,f_account_id,f_account_initially_id,f_popsinger,f_sex,f_headimg,
		f_name,f_grade,f_now_hp,f_max_hp,
		f_now_mp,f_max_mp,f_now_sp,f_max_sp,f_now_experience,
		f_next_experience,f_attack,f_defence,f_hit,f_crt,
		f_dodge,f_atk_coldtime,f_move_speed,f_zhenqi,f_attack_addpoint,
		f_defence_addpoint,f_light_addpoint,f_strong_addpoint,f_potential,
		f_copper,f_jiaozi,f_prestige,
		f_now_appellationid,f_scene,f_x,f_y,
		f_pk_model,f_isallow_chat,f_allowchat_starttime,f_createtime,f_createip,
		f_lastdate,f_lastip,f_onlinedate,f_skillid,
		f_last_logindate,f_isclose_character,
		f_isonline,f_max_horse_amount,f_channel_xuewei,f_channel_beidong_exp,
		f_channel_jingmai,f_channel_realdragon,f_max_bag_amount,f_max_storage_amount,f_max_storage_horse_amount,f_now_xingqing,f_now_biaoqing,
		f_flower_count,f_state,f_biguan_date,f_stall_status,f_week_login_count,f_drop_good,f_max_jump_count,f_day_online,f_chongqi_record,f_chengjiu_point,
		f_contribution,f_skill_po_begin_time,f_skill_po_time,f_skip_novice_navigation,f_devilcnt,f_leiji_gain_lijin,f_limit_online_time,t_dantian_grade,f_chengzhan_shengwang,f_today_chengzhan_shengwang,
		f_lunjian_shengwang,f_today_liaoshang_exp,f_today_liaoshang_time,f_kill_num)
		values(
		#originalSid#,#accountId#,#accountInitiallyId#,#popsinger#,#sex#,#headimg#,
		#name#,#grade#,#nowHp#,#maxHp#,
		#nowMp#,#maxMp#,#nowSp#,#maxSp#,#nowExperience#,
		#nextExperience#,#attack#,#defence#,#hit#,#crt#,
		#dodge#,#atkColdtime#,#moveSpeed#,#zhenqi#,#attackAddpoint#,
		#defenceAddpoint#,#lightAddpoint#,#strongAddpoint#,#potential#,
		#copper#,#jiaozi#,#prestige#,
		#nowAppellationid#,#scene#,#x#,#y#,
		#pkModel#,#isallowChat#,#allowchatStarttime#,#createtime#,#createip#,
		#lastdate#,#lastip#,#onlinedate#,#skillid#,
		#lastLogindate#,#iscloseCharacter#,
		#isonline#,#maxHorseAmount#,#channelXuewei#,#channelBeidongExp#,
		#channelJingmai#,#channelRealdragon#,#maxBagAmount#,#maxStorageAmount#,#maxStorageHorseAmount#,#nowXingqing#,
		#nowBiaoqing#,#flowerCount#,#state#,#biguanDate#,#stallStatus#,#weekLoginCount#,#dropGood#,#maxJumpCount#,
		#dayOnline#,#chongqiRecord#,#chengjiuPoint#,#contribution#,#skillpoBeginTime#,#skillpoTime#,#skipNoviceNavigation#,
		#devilcnt#,#leijiGainLijin#,#limitOnlineTime#,#dantiangrade#,#chengzhanShengWang#,#todayChengzhanShengwang#,#lunjianShengWang#,#todayLiaoshangExp#,#todayLiaoshangTime#,#killNum#)
		<selectKey resultClass="int" keyProperty="id">
			SELECT @@IDENTITY
			AS ID
		</selectKey>
	</insert>

	<update id="characterDelete" parameterClass="java.lang.Integer">
		update t_character set f_delete_mark=1 where f_id = #id#
	</update>

	<select id="characterGet" parameterClass="java.lang.Integer" resultMap="HeroRes">
		select * from t_character where f_id = #id#
	</select>

	<!-- 角色数据自动更新 以后要分字段自动更新,各自模板更新各自的消息 -->
	<update id="characterUpdate" parameterClass="Hero">
		update t_character
		set
		f_grade=#grade#,
		f_now_hp=#nowHp#,f_max_hp=#maxHp#,
		f_now_mp=#nowMp#,f_max_mp=#maxMp#,
		f_now_sp=#nowSp#,f_max_sp=#maxSp#,
		f_now_experience=#nowExperience#,
		f_next_experience=#nextExperience#,
		f_attack=#attack#,f_defence=#defence#,
		f_hit=#hit#,f_crt=#crt#,f_dodge=#dodge#,
		f_atk_coldtime=#atkColdtime#,
		f_move_speed=#moveSpeed#,
		f_zhenqi=#zhenqi#,
		f_attack_addpoint=#attackAddpoint#,
		f_defence_addpoint=#defenceAddpoint#,
		f_light_addpoint=#lightAddpoint#,
		f_strong_addpoint=#strongAddpoint#,
		f_potential=#potential#,
		f_copper=#copper#,
		f_jiaozi=#jiaozi#,
		f_prestige=#prestige#,
		f_now_appellationid=#nowAppellationid#,
		f_scene=#scene#,
		f_x=#x#,
		f_y=#y#,
		f_lastdate=#lastdate#,
		f_lastip=#lastip#,
		f_onlinedate=#onlinedate#,
		f_skillid=#skillid#,
		f_last_logindate=#lastLogindate#,
		f_isonline=#isonline#,
		f_channel_xuewei=#channelXuewei#,
		f_channel_jingmai=#channelJingmai#,
		f_channel_realdragon=#channelRealdragon#,
		f_worship_count=#worshipcount# ,
		f_contempt_count=#contemptcount#,
		f_max_continue_killcount=#maxContinueKillcount#,
		f_max_bag_amount=#maxBagAmount#,
		f_max_storage_amount=#maxStorageAmount#,
		f_max_storage_horse_amount=#maxStorageHorseAmount#,
		f_max_horse_amount=#maxHorseAmount#,
		f_storage_copper=#storageCopper#,
		f_wuxue_jingjie=#wuxueJingjie#,
		f_stall_name=#stallName#,
		f_boss_kill=#bossKill#,
		f_stall_Name=#stallName#,
		f_now_xingqing=#nowXingqing#,
		f_now_biaoqing=#nowBiaoqing#,
		f_flower_count=#flowerCount#,
		f_state=#state#,
		f_biguan_date=#biguanDate#,
		f_pk_model=#pkModel#,
		f_last_ridehorse=#lastRidehorse#,
		f_week_login_count=#weekLoginCount#,
		f_drop_good=#dropGood#,
		f_max_jump_count=#maxJumpCount#,
		f_day_online=#dayOnline#,
		f_dazuo_skill=#dazuoSkill#,
		f_chongqi_record=#chongqiRecord#,
		f_chengjiu_point=#chengjiuPoint#,
		f_channel_beidong_exp=#channelBeidongExp#,
		f_contribution=#contribution#,
		f_skill_po_begin_time=#skillpoBeginTime#,
		f_skill_po_time=#skillpoTime#,
		f_channel_realdragon=#channelRealdragon#,
		f_skip_novice_navigation=#skipNoviceNavigation#,
		f_devilcnt=#devilcnt#,
		f_headimg=#headimg#,
		f_leiji_gain_lijin=#leijiGainLijin#,
		f_limit_online_time=#limitOnlineTime#,
		t_dantian_grade=#dantiangrade#,
		f_chengzhan_shengwang=#chengzhanShengWang#,
		f_lunjian_shengwang=#lunjianShengWang#,
		f_today_liaoshang_exp=#todayLiaoshangExp#,
		f_today_liaoshang_time=#todayLiaoshangTime#,
		f_today_chengzhan_shengwang=#todayChengzhanShengwang#,
		f_fuhua_cdtime=#fuhuaCdtime#,
		f_fuhua_starttime=#fuhuaStarttime#,
		f_fuhua_neidan_id=#fuhuaNeidanId#,f_isfuhua=#isfuhua#,f_fuhua_count=#fuhuaCount#,f_kill_num=#killNum#
		where f_id = #id#
	</update>

	<resultMap id="characteCacheResult" class="net.snake.gamemodel.hero.bean.CharacterCacheEntry">
		<result property="id" column="f_id" />
		<result property="popsinger" column="f_popsinger" />
		<result property="sex" column="f_sex" />
		<result property="headimg" column="f_headimg" />
		<result property="name" column="f_name" />
		<result property="grade" column="f_grade" />
		<result property="nowXingqing" column="f_now_xingqing" />
		<result property="nowBiaoqing" column="f_now_biaoqing" />
		<result property="flowerCount" column="f_flower_count" />
		<result property="chengjiuPoint" column="f_chengjiu_point" />
		<result property="bossKill" column="f_boss_kill" nullValue="0" />
		<result property="channelXuewei" column="f_channel_xuewei" nullValue="0" />
		<result property="wuxueJingjie" column="f_wuxue_jingjie" nullValue="0" />
		<result property="chenzhanshengwang" column="f_chengzhan_shengwang" />
		<result property="originalSid" column="f_original_sid" />
		<result property="dantiangrade" column="t_dantian_grade" nullValue="0" />
		<result property="factionName" column="f_faction_name" />
	</resultMap>

	<select id="characterGetAll" resultMap="characteCacheResult">
		select
		f_id,f_popsinger,f_sex,f_headimg,f_name,f_grade,f_now_xingqing,f_now_biaoqing,f_flower_count,f_chengjiu_point,f_boss_kill,f_channel_xuewei,f_wuxue_jingjie,f_chengzhan_shengwang,f_original_sid,t_dantian_grade,
(select f_name from t_faction where f_id=(SELECT f_faction_id from t_faction_character where f_character_id=t_character.f_id)) as f_faction_name 
		from t_character
	</select>

	<delete id="characterGoodsDeleteByCharacterId" parameterClass="java.lang.Integer">
		delete from t_character_goods where f_character_id= #id#
	</delete>
	<delete id="characterSkillDeleteByCharacterId" parameterClass="java.lang.Integer">
		delete from t_character_skill where f_character_id= #id#
	</delete>
	<delete id="herodujieDelByHeroId" parameterClass="java.lang.Integer">
		delete from t_character_dujie where f_character_id= #id#
	</delete>
	<delete id="characterAppellationDeleteByCharacterId" parameterClass="java.lang.Integer">
		delete from t_character_appellation where
		f_character_id= #id#
	</delete>
	<delete id="characterTaskDeleteByCharacterId" parameterClass="java.lang.Integer">
		delete from t_character_task where f_character_id= #id#
	</delete>
	<delete id="deleteSelfFriend" parameterClass="java.lang.Integer">
		delete from
		t_character_friend where f_character_id= #id#
	</delete>
	<delete id="deleteOwnMeFriend" parameterClass="java.lang.Integer">
		update
		t_character_friend set f_status=1 where f_friend_id= #id#
	</delete>
	<select id="isExistname" resultClass="java.lang.String" parameterClass="java.lang.String">
		select f_id from t_character where f_name=#name# LIMIT 1
	</select>



	<resultMap id="CharacterForList" class="net.snake.gamemodel.hero.bean.CharacterForList">
		<result property="id" column="f_id" />
		<result property="headimg" column="f_headimg" />
		<result property="name" column="f_name" />
		<result property="grade" column="f_grade" />
		<result property="popsinger" column="f_popsinger" />
		<result property="deleteMark" column="f_delete_mark" />
		<result property="originalSid" column="f_original_sid" />
		<result property="factionName" column="f_faction_name" />
	</resultMap>

	<select id="getCharacterByAccountIdAndSid" parameterClass="java.util.Map" resultMap="CharacterForList">
		select f_id,f_headimg,f_name,f_grade,f_popsinger,f_delete_mark,f_original_sid,
(select f_name from t_faction where f_id=(SELECT f_faction_id from t_faction_character where f_character_id=t_character.f_id))as f_faction_name from
		t_character where f_account_id = #accountId# and f_original_sid =#sid#
		order by f_last_logindate desc
	</select>
	<select id="getCharacterByAccountId" parameterClass="java.lang.Integer" resultMap="CharacterForList">
		select
		f_id,f_headimg,f_name,f_grade,f_popsinger,f_delete_mark,f_original_sid,
(select f_name from t_faction where f_id=(SELECT f_faction_id from t_faction_character where f_character_id=t_character.f_id))as f_faction_name
		from
		t_character where f_account_id = #account#
		order by
		f_last_logindate
		desc
	</select>

	<resultMap id="Characterrankings" class="net.snake.gamemodel.hero.bean.CharacterRanking">
		<result property="id" column="f_id" />
		<result property="copper" column="f_copper" />
		<result property="jiaozi" column="f_jiaozi" />
		<result property="popsinger" column="f_popsinger" />
		<result property="name" column="f_name" />
		<result property="grade" column="f_grade" />
		<result property="nowExperience" column="f_now_experience" />
		<result property="nowAppellationid" column="f_now_appellationid" />
		<result property="channelXuewei" column="f_channel_xuewei" />
		<result property="maxContinueKillcount" column="f_max_continue_killcount" />
		<result property="prestige" column="f_prestige" />
		<result property="bossKill" column="f_boss_kill" nullValue="0" />
		<result property="stallName" column="f_stall_Name" />
		<result property="wuxueJingjie" column="f_wuxue_jingjie" nullValue="0" />
		<result property="storageCopper" column="f_storage_copper" />
		<result property="flowerCount" column="f_flower_count" />
		<result property="nowXingqing" column="f_now_xingqing" />
		<result property="nowBiaoqing" column="f_now_biaoqing" />
		<result property="chengjiuPoint" column="f_chengjiu_point" />
		<result property="chengzhanShengWang" column="f_chengzhan_shengwang" />
		<result property="lunjianShengWang" column="f_lunjian_shengwang" />
	</resultMap>

	<!--12点 更新充气记录 -->
	<update id="updateClock12Characters">
		update t_character set
		f_chongqi_record=0,f_devilcnt=0,f_today_chengzhan_shengwang=0
	</update>
	<!--6点 更新记录 -->
	<update id="clearLuckValueForHiddenWeapon">
		update t_character_hidden_weapon set f_luck_value=0
	</update>
	<update id="clearZhuFu">
		update t_character_dantian set
		f_before_luck=f_luck,f_luck_lastclear=now(),f_luck=0
	</update>

	<update id="clearDGWDZhuFu">
		update t_character_dgwd set
		f_before_luck=f_luck,f_luck_lastclear=now(),f_luck=0
	</update>
	<select id="getRankingsNewKing" resultMap="Characterrankings">
		SELECT
		f_id,f_name,f_popsinger,f_grade,f_now_experience,f_copper,f_jiaozi,f_now_appellationid,f_channel_xuewei,f_max_continue_killcount
		,f_prestige,f_boss_kill,f_stall_Name,f_wuxue_jingjie,f_flower_count,f_now_xingqing,f_now_biaoqing,f_chengjiu_point,f_chengzhan_shengwang
		,f_lunjian_shengwang
		FROM t_character
		order
		by f_grade
		desc,f_now_experience desc limit 0,10
	</select>

	<select id="getRankingsMoney" resultMap="Characterrankings">
		SELECT
		f_id,f_name,f_popsinger,f_copper,f_jiaozi,f_grade,f_now_experience,f_now_appellationid,f_channel_xuewei,f_max_continue_killcount
		,f_prestige,f_boss_kill,f_stall_Name,f_wuxue_jingjie,f_flower_count,f_now_xingqing,f_now_biaoqing,f_chengjiu_point,f_chengzhan_shengwang
		,f_lunjian_shengwang
		FROM t_character
		order
		by f_copper desc limit 0,10
	</select>

	<select id="getRankingsHero" resultMap="Characterrankings">
		SELECT
		f_id,f_name,f_grade,f_popsinger,f_now_experience,f_copper,f_jiaozi,f_now_appellationid,f_channel_xuewei,f_max_continue_killcount
		,f_prestige,f_boss_kill,f_stall_Name,f_wuxue_jingjie,f_flower_count,f_now_xingqing,f_now_biaoqing,f_chengjiu_point,f_chengzhan_shengwang
		,f_lunjian_shengwang
		FROM t_character
		order
		by t_character.f_grade
		desc,f_now_experience
		desc limit 0,100
	</select>

	<select id="getRankingCharacter" resultMap="Characterrankings" parameterClass="java.util.Map">
		SELECT
		f_id,f_name,f_grade,f_popsinger,f_now_experience,f_copper,f_jiaozi,f_now_appellationid,f_channel_xuewei,f_max_continue_killcount
		,f_prestige,f_boss_kill,f_stall_Name,f_wuxue_jingjie,f_storage_copper,f_flower_count,f_now_xingqing,f_now_biaoqing,f_chengjiu_point,f_chengzhan_shengwang
		,f_lunjian_shengwang
		FROM
		t_character
		WHERE f_grade >20 and f_account_id
		not in ($id$) and f_delete_mark =0
		ORDER
		BY f_grade DESC ,
		f_now_experience DESC,
		f_id DESC LIMIT 0,100

	</select>

	<select id="getRankingMoney2" resultMap="Characterrankings" parameterClass="java.util.Map">
		SELECT
		f_id,f_name,f_grade,f_popsinger,f_now_experience,f_copper,f_jiaozi,f_now_appellationid,f_channel_xuewei,f_max_continue_killcount
		,f_prestige,f_boss_kill,f_stall_Name,f_wuxue_jingjie,f_storage_copper,f_flower_count,f_now_xingqing,f_now_biaoqing,f_chengjiu_point,f_chengzhan_shengwang
		,f_lunjian_shengwang
		FROM
		t_character
		WHERE f_grade >20 and f_account_id
		not in ($id$) and f_delete_mark =0
		ORDER
		BY (f_copper+f_storage_copper)
		DESC,
		f_grade DESC ,
		f_now_experience
		DESC,
		f_id DESC LIMIT 0,100
	</select>

	<select id="getRankingtongjimoney" resultMap="Characterrankings" parameterClass="java.util.Map">
		SELECT
		f_id,f_name,f_grade,f_popsinger,f_now_experience,f_copper,f_storage_copper,f_jiaozi,f_now_appellationid,f_channel_xuewei,f_max_continue_killcount
		,f_prestige,f_boss_kill,f_stall_Name,f_wuxue_jingjie,f_storage_copper,f_flower_count,f_now_xingqing,f_now_biaoqing,f_chengjiu_point,f_chengzhan_shengwang
		,f_lunjian_shengwang
		FROM
		t_character
		WHERE f_grade =#grade# and
		f_account_id not in ($id$) and f_delete_mark =0
		ORDER BY
		(f_copper+f_storage_copper) DESC,
		f_grade DESC ,
		f_id DESC
		LIMIT 0,100
	</select>
	<select id="getRankingjingmai" resultMap="Characterrankings" parameterClass="java.util.Map">
		SELECT
		f_id,f_name,f_grade,f_popsinger,f_now_experience,f_copper,f_jiaozi,f_now_appellationid,f_channel_xuewei,f_max_continue_killcount
		,f_prestige,f_boss_kill,f_stall_Name,f_wuxue_jingjie,f_storage_copper,f_flower_count,f_now_xingqing,f_now_biaoqing,f_chengjiu_point,f_chengzhan_shengwang
		,f_lunjian_shengwang
		FROM
		t_character
		INNER JOIN t_channel_zhenlong ON
		t_character.f_id = t_channel_zhenlong.f_character_id
		WHERE
		f_channel_xuewei >10 and f_account_id not in
		($id$) and f_delete_mark
		=0
		ORDER BY
		f_channel_xuewei DESC,
		t_channel_zhenlong.f_channel_congxue_time ,
		f_id
		LIMIT 0,100
	</select>
	<select id="getRankingtongjijingmai" resultMap="Characterrankings" parameterClass="java.util.Map">
		SELECT
		f_id,f_name,f_grade,f_popsinger,f_now_experience,f_copper,f_jiaozi,f_now_appellationid,f_channel_xuewei,f_max_continue_killcount
		,f_prestige,f_boss_kill,f_stall_Name,f_wuxue_jingjie,f_storage_copper,f_flower_count,f_now_xingqing,f_now_biaoqing,f_chengjiu_point,f_chengzhan_shengwang
		,f_lunjian_shengwang
		FROM
		t_character
		INNER JOIN t_channel_zhenlong ON
		t_character.f_id = t_channel_zhenlong.f_character_id
		WHERE f_grade
		=#grade# and f_account_id not in ($id$) and f_delete_mark =0
		ORDER BY
		f_channel_xuewei DESC,
		t_channel_zhenlong.f_channel_congxue_time ,
		f_id
		LIMIT 0,100
	</select>

	<select id="getRankinglianzhan" resultMap="Characterrankings" parameterClass="java.util.Map">
		SELECT
		f_id,f_name,f_grade,f_popsinger,f_now_experience,f_copper,f_jiaozi,f_now_appellationid,f_channel_xuewei,f_max_continue_killcount
		,f_prestige,f_boss_kill,f_stall_Name,f_wuxue_jingjie,f_storage_copper,f_flower_count,f_now_xingqing,f_now_biaoqing,f_chengjiu_point,f_chengzhan_shengwang
		,f_lunjian_shengwang
		FROM
		t_character
		WHERE f_max_continue_killcount
		>100 and f_account_id
		not in ($id$) and f_delete_mark =0
		ORDER BY
		f_max_continue_killcount DESC,
		f_grade ,
		f_id DESC
		LIMIT 0,100
	</select>

	<select id="getRankingtongjilianzhan" resultMap="Characterrankings" parameterClass="java.util.Map">
		SELECT
		f_id,f_name,f_grade,f_popsinger,f_now_experience,f_copper,f_jiaozi,f_now_appellationid,f_channel_xuewei,f_max_continue_killcount
		,f_prestige,f_boss_kill,f_stall_Name,f_wuxue_jingjie,f_storage_copper,f_flower_count,f_now_xingqing,f_now_biaoqing,f_chengjiu_point,f_chengzhan_shengwang
		,f_lunjian_shengwang
		FROM
		t_character
		WHERE f_grade =#grade# and
		f_account_id not in ($id$) and f_delete_mark =0
		ORDER BY
		f_max_continue_killcount DESC,
		f_grade ,
		f_id DESC
		LIMIT 0,100
	</select>

	<select id="getRankingzhanchang" resultMap="Characterrankings" parameterClass="java.util.Map">
		SELECT
		f_id,f_name,f_grade,f_popsinger,f_now_experience,f_copper,f_jiaozi,f_now_appellationid,f_channel_xuewei,f_max_continue_killcount
		,f_prestige,f_boss_kill,f_stall_Name,f_wuxue_jingjie,f_storage_copper,f_flower_count,f_now_xingqing,f_now_biaoqing,f_chengjiu_point,f_chengzhan_shengwang
		,f_lunjian_shengwang
		FROM
		t_character
		WHERE f_prestige >100 and
		f_account_id not in ($id$) and f_delete_mark =0
		ORDER BY f_prestige
		DESC,
		f_grade DESC ,
		f_id DESC
		LIMIT 0,100
	</select>

	<select id="getRankingtongjizhanchang" resultMap="Characterrankings" parameterClass="java.util.Map">
		SELECT
		f_id,f_name,f_grade,f_popsinger,f_now_experience,f_copper,f_jiaozi,f_now_appellationid,f_channel_xuewei,f_max_continue_killcount
		,f_prestige,f_boss_kill,f_stall_Name,f_wuxue_jingjie,f_storage_copper,f_flower_count,f_now_xingqing,f_now_biaoqing,f_chengjiu_point,f_chengzhan_shengwang
		,f_lunjian_shengwang
		FROM
		t_character
		WHERE f_grade =#grade# and
		f_account_id not in ($id$) and f_delete_mark =0
		ORDER BY f_prestige
		DESC,
		f_grade ,
		f_id DESC
		LIMIT 0,100
	</select>

	<select id="getRankingbossjisha" resultMap="Characterrankings" parameterClass="java.util.Map">
		SELECT
		f_id,f_name,f_grade,f_popsinger,f_now_experience,f_copper,f_jiaozi,f_now_appellationid,f_channel_xuewei,f_max_continue_killcount
		,f_prestige,f_boss_kill,f_stall_Name,f_wuxue_jingjie,f_storage_copper,f_flower_count,f_now_xingqing,f_now_biaoqing,f_chengjiu_point,f_chengzhan_shengwang
		,f_lunjian_shengwang
		FROM
		t_character WHERE f_boss_kill>10 and
		f_account_id not in ($id$) and f_delete_mark =0
		ORDER BY f_boss_kill
		DESC,f_grade,
		f_id DESC LIMIT 0,100

	</select>


	<select id="getRankingtongjibossjisha" resultMap="Characterrankings" parameterClass="java.util.Map">
		SELECT
		f_id,f_name,f_grade,f_popsinger,f_now_experience,f_copper,f_jiaozi,f_now_appellationid,f_channel_xuewei,f_max_continue_killcount
		,f_prestige,f_boss_kill,f_stall_Name,f_wuxue_jingjie,f_storage_copper,f_flower_count,f_now_xingqing,f_now_biaoqing,f_chengjiu_point,f_chengzhan_shengwang
		,f_lunjian_shengwang
		FROM
		t_character
		WHERE f_grade =#grade# and
		f_account_id not in ($id$) and f_delete_mark =0
		ORDER BY f_boss_kill
		DESC,
		f_grade ,
		f_id DESC
		LIMIT 0,100
	</select>


	<select id="getRankingwuxuejingjie" resultMap="Characterrankings" parameterClass="java.util.Map">
		SELECT
		f_id,f_name,f_grade,f_popsinger,f_now_experience,f_copper,f_jiaozi,f_now_appellationid,f_channel_xuewei,f_max_continue_killcount
		,f_prestige,f_boss_kill,f_wuxue_jingjie,f_stall_Name,f_storage_copper,f_flower_count,f_now_xingqing,f_now_biaoqing,f_chengjiu_point,f_chengzhan_shengwang
		,f_lunjian_shengwang
		FROM
		t_character WHERE f_wuxue_jingjie>100 and
		f_account_id not in
		($id$) and f_delete_mark =0
		ORDER BY f_wuxue_jingjie
		DESC,f_grade,
		f_id DESC LIMIT 0,100

	</select>


	<select id="getRankingtongjiwuxuejingjie" resultMap="Characterrankings" parameterClass="java.util.Map">
		SELECT
		f_id,f_name,f_grade,f_popsinger,f_now_experience,f_copper,f_jiaozi,f_now_appellationid,f_channel_xuewei,f_max_continue_killcount
		,f_prestige,f_boss_kill,f_wuxue_jingjie,f_stall_Name,f_storage_copper,f_flower_count,f_now_xingqing,f_now_biaoqing,f_chengjiu_point,f_chengzhan_shengwang
		,f_lunjian_shengwang
		FROM
		t_character
		WHERE f_grade =#grade# and
		f_account_id not in ($id$) and f_delete_mark =0
		ORDER BY
		f_wuxue_jingjie DESC,
		f_grade ,
		f_id DESC
		LIMIT 0,100
	</select>

	<select id="getRankingchingjiu" resultMap="Characterrankings" parameterClass="java.util.Map">
		SELECT
		f_id,f_name,f_grade,f_popsinger,f_now_experience,f_copper,f_jiaozi,f_now_appellationid,f_channel_xuewei,f_max_continue_killcount
		,f_prestige,f_boss_kill,f_wuxue_jingjie,f_stall_Name,f_storage_copper,f_flower_count,f_now_xingqing,f_now_biaoqing,f_chengjiu_point,f_chengzhan_shengwang
		,f_lunjian_shengwang
		FROM
		t_character
		WHERE f_grade > 20 and
		f_account_id not in ($id$) and f_delete_mark =0
		ORDER BY
		f_chengjiu_point DESC,
		f_grade ,
		f_id DESC
		LIMIT 0,100
	</select>
	<select id="getRankingtongjichengjiu" resultMap="Characterrankings" parameterClass="java.util.Map">
		SELECT
		f_id,f_name,f_grade,f_popsinger,f_now_experience,f_copper,f_jiaozi,f_now_appellationid,f_channel_xuewei,f_max_continue_killcount
		,f_prestige,f_boss_kill,f_wuxue_jingjie,f_stall_Name,f_storage_copper,f_flower_count,f_now_xingqing,f_now_biaoqing,f_chengjiu_point,f_chengzhan_shengwang
		,f_lunjian_shengwang
		FROM
		t_character
		WHERE f_grade =#grade# and
		f_account_id not in ($id$) and f_delete_mark =0
		ORDER BY
		f_chengjiu_point DESC,
		f_grade ,
		f_id DESC
		LIMIT 0,100
	</select>

	<select id="getRankingchengzhan" resultMap="Characterrankings" parameterClass="java.util.Map">
		SELECT
		f_id,f_name,f_grade,f_popsinger,f_now_experience,f_copper,f_jiaozi,f_now_appellationid,f_channel_xuewei,f_max_continue_killcount
		,f_prestige,f_boss_kill,f_wuxue_jingjie,f_stall_Name,f_storage_copper,f_flower_count,f_now_xingqing,f_now_biaoqing,f_chengjiu_point,f_chengzhan_shengwang
		,f_lunjian_shengwang
		FROM
		t_character
		WHERE f_chengzhan_shengwang >0 and
		f_grade > 20 and f_account_id not in ($id$) and f_delete_mark =0
		ORDER
		BY f_chengzhan_shengwang DESC,
		f_grade DESC,
		f_id DESC
		LIMIT 0,100
	</select>
	<select id="getRankingtongjichengzhan" resultMap="Characterrankings" parameterClass="java.util.Map">
		SELECT
		f_id,f_name,f_grade,f_popsinger,f_now_experience,f_copper,f_jiaozi,f_now_appellationid,f_channel_xuewei,f_max_continue_killcount
		,f_prestige,f_boss_kill,f_wuxue_jingjie,f_stall_Name,f_storage_copper,f_flower_count,f_now_xingqing,f_now_biaoqing,f_chengjiu_point,f_chengzhan_shengwang
		,f_lunjian_shengwang
		FROM
		t_character
		WHERE f_chengzhan_shengwang >0 and
		f_grade =#grade# and f_account_id not in ($id$) and f_delete_mark =0
		ORDER BY f_chengzhan_shengwang DESC,
		f_grade DESC,
		f_id DESC
		LIMIT
		0,100
	</select>

	<select id="getRankinglunjian" resultMap="Characterrankings" parameterClass="java.util.Map">
		SELECT
		f_id,f_name,f_grade,f_popsinger,f_now_experience,f_copper,f_jiaozi,f_now_appellationid,f_channel_xuewei,f_max_continue_killcount
		,f_prestige,f_boss_kill,f_wuxue_jingjie,f_stall_Name,f_storage_copper,f_flower_count,f_now_xingqing,f_now_biaoqing,f_chengjiu_point,f_chengzhan_shengwang
		,f_lunjian_shengwang
		FROM
		t_character
		WHERE f_grade > 20 and
		f_lunjian_shengwang >0 and f_account_id not in ($id$) and
		f_delete_mark =0
		ORDER BY f_lunjian_shengwang DESC,
		f_grade DESC,
		f_id
		DESC
		LIMIT 0,100
	</select>
	<select id="getRankingtongjilunjian" resultMap="Characterrankings" parameterClass="java.util.Map">
		SELECT
		f_id,f_name,f_grade,f_popsinger,f_now_experience,f_copper,f_jiaozi,f_now_appellationid,f_channel_xuewei,f_max_continue_killcount
		,f_prestige,f_boss_kill,f_wuxue_jingjie,f_stall_Name,f_storage_copper,f_flower_count,f_now_xingqing,f_now_biaoqing,f_chengjiu_point,f_chengzhan_shengwang
		,f_lunjian_shengwang
		FROM
		t_character
		WHERE f_lunjian_shengwang >0 and
		f_grade =#grade# and f_account_id not in ($id$) and f_delete_mark =0
		ORDER BY f_lunjian_shengwang DESC,
		f_grade DESC,
		f_id DESC
		LIMIT 0,100
	</select>


	<select id="getRankinghua" resultMap="Characterrankings" parameterClass="java.util.Map">
		SELECT
		f_id,f_name,f_grade,f_popsinger,f_now_experience,f_copper,f_jiaozi,f_now_appellationid,f_channel_xuewei,f_max_continue_killcount
		,f_prestige,f_boss_kill,f_wuxue_jingjie,f_stall_Name,f_storage_copper,f_flower_count,f_now_xingqing,f_now_biaoqing,f_chengjiu_point,f_chengzhan_shengwang
		,f_lunjian_shengwang
		FROM
		t_character where f_account_id not in ($id$)
		and f_delete_mark =0

		ORDER BY
		f_flower_count desc
		LIMIT 0,10
	</select>

	<update id="updateCharacterchongbai" parameterClass="java.lang.Integer">
		UPDATE
		t_character SET f_worship_count = f_worship_count+1 WHERE
		f_id=#id#;
	</update>
	<update id="updateCharacterbishi" parameterClass="java.lang.Integer">
		UPDATE
		t_character SET f_contempt_count = f_contempt_count+1 WHERE
		f_id=#id#;
	</update>
	<update id="ResetBoss">
		UPDATE t_character SET f_boss_kill=0
	</update>

	<update id="addUpdateChannelBeidongExp">
		UPDATE `t_character` SET `f_channel_beidong_exp`=f_channel_beidong_exp+24
		where f_channel_beidong_exp &lt; 1000
	</update>

	<update id="updateCharacterInitiallyId" parameterClass="Hero">
		UPDATE
		`t_character` SET `f_character_initially_id` = #id# where `f_id` =
		#id#
	</update>

	<update id="ResetChengzhanAndLunJian">
		UPDATE `t_character` SET `f_chengzhan_shengwang`=0,
		`f_lunjian_shengwang`=0
	</update>


</sqlMap>
