<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd">
<sqlMap namespace="t_account">

	<typeAlias alias="Account" type="net.snake.gamemodel.account.bean.Account" />
	<resultMap class="Account" id="AccountRes">
		<result column="f_id" jdbcType="INTEGER" property="id" />
		<result column="f_account_initially_id" jdbcType="INTEGER" property="accountInitiallyId" />
		<result column="f_yunying_id" jdbcType="VARCHAR" property="yunyingId" />
		<result column="f_loginname" jdbcType="VARCHAR" property="loginname" />
		<result column="f_password" jdbcType="VARCHAR" property="password" />
		<result column="f_status" jdbcType="TINYINT" property="status" />
		<result column="f_create_date" jdbcType="TIMESTAMP" property="createDate" />
		<result column="f_create_ip" jdbcType="VARCHAR" property="createIp" />
		<result column="f_is_limit" jdbcType="TINYINT" property="isLimit" />
		<result column="f_lastlogin_ip" jdbcType="VARCHAR" property="lastloginIp" />
		<result column="f_lastlogin_date" jdbcType="TIMESTAMP" property="lastloginDate" />
		<result column="f_login_time" jdbcType="INTEGER" property="loginTime" />
		<result column="f_server" jdbcType="VARCHAR" property="server" />
		<result column="f_gm" jdbcType="INTEGER" property="gm" />
		<result column="f_yuanbao" jdbcType="INTEGER" property="yuanbao" />
		<result column="f_consume_yuanbao" jdbcType="INTEGER" property="consumeYuanbao" />
		<result column="f_recharge_yuanbao" jdbcType="INTEGER" property="rechargeYuanbao" />
		<result column="f_lastrechage_time" jdbcType="TIMESTAMP" property="lastrechageTime" />
		<result column="f_gain_yuanbao" jdbcType="INTEGER" property="gainYuanbao" />
		<result column="f_lost_yuanbao" jdbcType="INTEGER" property="lostYuanbao" />
		<result column="f_online" jdbcType="INTEGER" property="online" />
		<result column="f_remarks" jdbcType="VARCHAR" property="remarks" />
	</resultMap>

	<select id="getAccountsGM" resultMap="AccountRes">
		select * from t_account where f_gm = 1
	</select>

	<select id="selectByPrimaryKey" parameterClass="java.lang.Integer" resultMap="AccountRes">
		select * from t_account where f_id = #id#
	</select>

	<select id="selectByYunyingIdAndSid" parameterClass="Account" resultMap="AccountRes">
		select * from t_account where f_yunying_id= #yunyingId# and f_server=#server#
	</select>

	<select id="getByLoginname" parameterClass="java.lang.String" resultMap="AccountRes">
		select * from t_account where f_loginname = #loginname#
	</select>

	<insert id="insert" parameterClass="Account">
		insert into t_account (f_yunying_id, f_loginname, f_password,
		f_status,
		f_create_date, f_create_ip, f_is_limit, f_lastlogin_ip,
		f_lastlogin_date,
		f_login_time,
		f_server, f_gm,
		f_yuanbao,
		f_consume_yuanbao, f_recharge_yuanbao,
		f_lastrechage_time,
		f_gain_yuanbao, f_lost_yuanbao, f_online, f_remarks)
		values
		(#yunyingId:VARCHAR#, #loginname:VARCHAR#,
		#password:VARCHAR#,
		#status:TINYINT#, #createDate:TIMESTAMP#, #createIp:VARCHAR#,
		#isLimit:TINYINT#, #lastloginIp:VARCHAR#, #lastloginDate:TIMESTAMP#,
		#loginTime:INTEGER#,
		#server:VARCHAR#, #gm:INTEGER#, #yuanbao:INTEGER#,
		#consumeYuanbao:INTEGER#,
		#rechargeYuanbao:INTEGER#,
		#lastrechageTime:TIMESTAMP#,
		#gainYuanbao:INTEGER#,
		#lostYuanbao:INTEGER#,
		#online:INTEGER#, #remarks:VARCHAR#)
		<selectKey keyProperty="id" resultClass="java.lang.Integer">
			SELECT
			LAST_INSERT_ID()
		</selectKey>
	</insert>
	<update id="updateAccountYuanBao" parameterClass="map">
		update t_account set f_yuanbao=f_yuanbao+#add#, f_recharge_yuanbao=f_recharge_yuanbao+#add#,f_lastrechage_time=now() where	f_id=#gameaccountid#
	</update>

	<update id="update_consum_yuanbaoByPrimaryKey" parameterClass="java.util.Map">
		update t_account set f_yuanbao =f_yuanbao-#consum#, f_consume_yuanbao =f_consume_yuanbao+ #consum# where f_id
		= #id#
	</update>
	<update id="update_trade_reduceyuanbaoByPrimaryKey" parameterClass="java.util.Map">
		update t_account set f_yuanbao=f_yuanbao-#yuanbao#,f_lost_yuanbao =f_lost_yuanbao+#yuanbao# where
		f_id=#id#
	</update>
	<update id="update_trade_addyuanbaoByPrimaryKey" parameterClass="java.util.Map">
		update t_account set f_yuanbao=f_yuanbao+#yuanbao#,f_gain_yuanbao =f_gain_yuanbao+#yuanbao# where f_id =#id#
	</update>
	<update id="updateAccountInitiallyId" parameterClass="Account">
		update
		t_account set f_account_initially_id=#accountInitiallyId# where f_id =
		#id#
	</update>
	<update id="updateOnline" parameterClass="Account">
		update t_account set f_online=#online# where f_id = #id#
	</update>
	<update id="updateLoginInfo" parameterClass="Account">
		update t_account set
		f_lastlogin_date=#lastloginDate#,f_lastlogin_ip=#lastloginIp#,f_is_limit=#isLimit#,f_login_time=#loginTime#
		where f_id = #id#
	</update>
</sqlMap>